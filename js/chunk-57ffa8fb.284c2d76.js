(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-57ffa8fb"],{"321e":function(t,e,i){"use strict";i.r(e);var a={data:function(){return{modal:!1,deleModal:!1,detail_index:null,is_detail:!1,query:{keywords:"",pageSize:null,pageIndex:null},page:null,data:[],columns:[{title:"公告标题",slot:"Title"},{title:"公告内容",slot:"Content"},{title:"创建人",key:"RecordUserName",width:140},{title:"创建时间",key:"RecordTime",width:170},{title:"操作",slot:"action",width:180}],ruleValidate:{Title:[{required:!0,message:"请输入公告标题",trigger:"blur"}],Content:[{required:!0,message:"请输入公告内容",trigger:"blur"}]},form:{Title:"",Content:""}}},created:function(){this.getSysNot()},methods:{handle:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.is_detail=!!i,this.detail_index=e,-1===e?this.form={Title:"",Content:""}:this.getDetail(this.data[e].Id),this.modal=!0},getDetail:function(t){var e=this;this.$api("GET","/SysNotice/GetSysNoticeInfo?id=".concat(t)).then(function(t){0===t.ErrorCode?e.form=t.Data:e.$Notice.warning({title:"系统提示",desc:t.Message})})},updateColumns:function(t){this.columns=t},search:function(){this.query.keywords.trim().length?(this.page=null,this.getSysNot()):this.$Notice.warning({title:"系统提示",desc:"请输入搜索的关键字"})},getSysNot:function(){var t=this;this.loading=!0,this.page?(this.query.pageSize=this.page.pageSize,this.query.pageIndex=this.page.pageIndex):(this.query.pageSize=10,this.query.pageIndex=1),this.$api("POST","/SysNotice/GetSysNoticeList",this.query).then(function(e){t.loading=!1,0===e.ErrorCode&&(t.data=e.Data,t.page={pageCount:e.TotalRecords,pageIndex:t.query.pageIndex,pageSize:t.query.pageSize})})},onChange:function(t){this.page.pageIndex=1*t,this.getSysNot()},onPageSizeChange:function(t){this.page.pageSize=1*t,this.getSysNot()},remove:function(t){this.detail_index=t,this.deleModal=!0},del:function(){var t=this;this.$api("POST","/SysNotice/DeleteSysNotice",{Id:this.data[this.detail_index].Id}).then(function(e){0===e.ErrorCode?(t.getSysNot(),t.$Notice.success({title:"系统提示",desc:"操作成功"}),t.deleModal=!1):t.$Notice.warning({title:"系统提示",desc:e.Message})})},save:function(){var t=this;this.$refs.ruleValidate.validate(function(e){if(e){var i="/SysNotice/AddSysNotice";t.form.Id&&(i="/SysNotice/UpdateSysNotice"),t.$api("POST",i,t.form).then(function(e){0===e.ErrorCode?(t.getSysNot(),t.$Notice.success({title:"系统提示",desc:"操作成功"}),t.modal=!1):t.$Notice.warning({title:"系统提示",desc:e.Message})})}else t.$Notice.warning({title:"系统提示",desc:"请填写相关的内容"})})}}},n=(i("a742"),i("3dcf"),i("2877")),o=Object(n.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"btn-bar clear"},[i("div",{staticClass:"fl"},[i("Button",{style:{marginRight:"6px"},attrs:{type:"info",icon:"md-add"},on:{click:function(e){return t.handle(e,-1)}}},[t._v("添加公告")]),i("Button",{attrs:{icon:"md-refresh"},on:{click:t.getSysNot}},[t._v("刷新")])],1),i("div",{staticClass:"fr"},[i("Input",{staticStyle:{width:"200px"},style:{marginRight:"6px"},attrs:{placeholder:"请输入公告标题、公告内容"},model:{value:t.query.keywords,callback:function(e){t.$set(t.query,"keywords",e)},expression:"query.keywords"}}),i("Button",{on:{click:t.search}},[t._v("搜索")]),i("FiltrateButton",{attrs:{columns:t.columns},on:{updateColumns:t.updateColumns}})],1)]),i("div",{staticClass:"table-section"},[i("Table",{attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data},scopedSlots:t._u([{key:"Title",fn:function(e){var a=e.row;return[i("div",{staticClass:"wrap"},[i("p",[t._v(t._s(a.Title))])])]}},{key:"Content",fn:function(e){var a=e.row;return[i("div",{staticClass:"wrap"},[i("p",[t._v(t._s(a.Content))])])]}},{key:"action",fn:function(e){e.row;var a=e.index;return[i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(e){return t.handle(e,a)}}},[t._v("编辑")]),i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(e){return t.handle(e,a,!0)}}},[t._v("详情")]),i("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.remove(a)}}},[t._v("删除")])]}}])})],1),t.page?i("iPage",{attrs:{pageSize:t.page.pageSize,current:t.page.pageIndex,total:t.page.pageCount},on:{onChange:t.onChange,onPageSizeChange:t.onPageSizeChange}}):t._e(),i("Modal",{attrs:{width:"560","footer-hide":!0,title:"系统公告"},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[i("Form",{ref:"ruleValidate",attrs:{model:t.form,rules:t.ruleValidate,"label-width":100}},[i("FormItem",{attrs:{label:"公告标题",prop:"Title"}},[i("Input",{attrs:{disabled:t.is_detail,placeholder:"请输入公告标题"},model:{value:t.form.Title,callback:function(e){t.$set(t.form,"Title",e)},expression:"form.Title"}})],1),i("FormItem",{attrs:{label:"公告内容",prop:"Content"}},[i("Input",{attrs:{disabled:t.is_detail,type:"textarea",rows:4,placeholder:"请输入公告内容"},model:{value:t.form.Content,callback:function(e){t.$set(t.form,"Content",e)},expression:"form.Content"}})],1),i("FormItem",[t.is_detail?t._e():i("Button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),i("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.modal=!1}}},[t._v("关闭")])],1)],1)],1),i("Modal",{attrs:{width:"360"},model:{value:t.deleModal,callback:function(e){t.deleModal=e},expression:"deleModal"}},[i("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[i("Icon",{attrs:{type:"ios-information-circle"}}),i("span",[t._v("删除提示")])],1),i("div",{staticStyle:{"text-align":"center"}},[i("p",[t._v("是否确定要删除该系统通知?")]),i("p",[t._v("删除后将无法恢复")])]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"error",size:"large",long:""},on:{click:t.del}},[t._v("确定删除")])],1)])],1)},[],!1,null,"11cf165d",null);e.default=o.exports},3696:function(t,e,i){},"3dcf":function(t,e,i){"use strict";var a=i("3696");i.n(a).a},"7fba":function(t,e,i){},a742:function(t,e,i){"use strict";var a=i("7fba");i.n(a).a}}]);