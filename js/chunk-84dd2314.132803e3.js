(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-84dd2314"],{"0390":function(e,t,a){"use strict";var r=a("3778");a.n(r).a},2896:function(e,t,a){"use strict";a.r(t);var r={components:{iUpload:a("3175").a},data:function(){return{isEdit:!1,id:null,BusinessLicenseImage_defaultList:[],IdCardFrontImage_defaultList:[],IdCardBackImage_defaultList:[],bank:[],form:{OperatorId:"",UserId:"",MerchantType:"3",SubMerId:"",SubMerName:"",SubMerType:"2",ContactName:"",CertificateType:"",CertificateNo:"",CompanyName:"",CompanyCertType:"",CompanyCertNo:"",AccountName:"",Account:"",BankName:"",AccountType:"",MobilePhone:"",Address:"",Remark:"",IdCardFrontImage:"",IdCardBackImage:"",BusinessLicenseImage:""},cardType:[{value:"I",label:"身份证"},{value:"P",label:"护照"},{value:"G",label:"军官证"},{value:"U",label:"其他证件"}],compCardType:[{value:"U",label:"营业执照"},{value:"Y",label:"组织机构代码证"},{value:"V",label:"统一社会信用代码"}],accountType:[{value:"401",label:"借记卡"},{value:"601",label:"支票户"}],ruleValidate:{SubMerId:[{required:!0,message:"请输入商户编码",trigger:"blur"}],SubMerName:[{required:!0,message:"请输入商户名称",trigger:"blur"}],BusinessLicenseImage:[{required:!0,message:"请上传营业执照",trigger:"blur"}],ContactName:[{required:!0,message:"请输负责人名称",trigger:"blur"}],CertificateType:[{required:!0,message:"请选择负责人证件类型",trigger:"change"}],CertificateNo:[{required:!0,message:"请输入负责人证件号码",trigger:"blur"}],CompanyName:[{required:!0,message:"请输入企业名称",trigger:"blur"}],CompanyCertType:[{required:!0,message:"请选择企业证件类型",trigger:"change"}],CompanyCertNo:[{required:!0,message:"请输入企业证件号码",trigger:"blur"}],AccountName:[{required:!0,message:"请输入收款户名",trigger:"blur"}],Account:[{required:!0,message:"请输入收款账号",trigger:"blur"}],BankName:[{required:!0,message:"请输入收款银行",trigger:"blur"}],AccountType:[{required:!0,message:"请选择收款账号类型",trigger:"change"}],MobilePhone:[{required:!0,message:"请输入预留手机号",trigger:"blur"}]}}},created:function(){this.getBank(),this.$route.params.id?(this.id=this.$route.params.id,this.isEdit=!0,this.editInit()):this.form.SubMerId="保存后自动生成"},methods:{rchange:function(e){this.isEdit||(this.form.SubMerName=3!=e?"保存后自动生成":"")},editInit:function(){var e=this;this.$api("POST","/Merchant/GetMerchantById?id=".concat(this.id)).then(function(t){0===t.ErrorCode?(e.form=t.Data,e.$forceUpdate(),setTimeout(function(){t.Data.BusinessLicenseImage&&(e.$set(e.BusinessLicenseImage_defaultList,0,{name:(new Date).getTime()+"",url:t.Data.BusinessLicenseImage}),e.$refs.BusinessLicenseImage.uploadFun(t.Data.BusinessLicenseImage)),t.Data.IdCardFrontImage&&(e.$set(e.IdCardFrontImage_defaultList,0,{name:(new Date).getTime()+"",url:t.Data.IdCardFrontImage}),e.$refs.IdCardFrontImage.uploadFun(t.Data.IdCardFrontImage)),t.Data.IdCardBackImage&&(e.$set(e.IdCardBackImage_defaultList,0,{name:(new Date).getTime()+"",url:t.Data.IdCardBackImage}),e.$refs.IdCardBackImage.uploadFun(t.Data.IdCardBackImage))},300)):e.$Notice.warning({title:"系统提示",desc:t.Message})})},getBank:function(){var e=this;this.$api("GET","/Merchant/GetBankList").then(function(t){0===t.ErrorCode?e.bank=t.Data:e.$Notice.warning({title:"系统提示",desc:t.Message})})},save:function(){var e=this;this.$refs.ruleValidate.validate(function(t){if(t){var a="/Merchant/AddMerchant";if(e.form.Id&&(a="/Merchant/UpdateMerchant"),2==e.form.SubMerType){if(e.form.BusinessLicenseImage=e.$refs.BusinessLicenseImage.getPic(),!e.form.BusinessLicenseImage)return void e.$Notice.warning({title:"系统提示",desc:"请上传营业执照"})}else if(e.form.IdCardFrontImage=e.$refs.IdCardFrontImage.getPic(),e.form.IdCardBackImage=e.$refs.IdCardBackImage.getPic(),!e.form.IdCardFrontImage||!e.form.IdCardBackImage)return void e.$Notice.warning({title:"系统提示",desc:"请上身份证正反面"});e.$api("POST",a,e.form).then(function(t){0===t.ErrorCode?(e.$Notice.success({title:"系统提示",desc:"保存成功"}),e.back()):e.$Notice.warning({title:"系统提示",desc:t.Message})})}else e.$Notice.warning({title:"系统提示",desc:"请填写相关的信息"})})},back:function(){this.$router.go(-1)}}},i=(a("ee7c"),a("bb17"),a("2877")),o=Object(i.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"sub-account-partner-handle"},[a("div",{staticClass:"contain"},[a("Form",{ref:"ruleValidate",attrs:{rules:e.ruleValidate,model:e.form,"label-position":"left","label-width":110}},[a("div",{staticClass:"info"},[a("Card",{style:{marginBottom:"30px"}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("基本信息")]),a("div",{staticClass:"form"},[a("FormItem",{attrs:{label:"商户类型",prop:"MerchantType"}},[a("RadioGroup",{on:{"on-change":e.rchange},model:{value:e.form.MerchantType,callback:function(t){e.$set(e.form,"MerchantType",t)},expression:"form.MerchantType"}},[a("Radio",{attrs:{disabled:e.isEdit,label:"1"}},[a("span",[e._v("运营商")])]),a("Radio",{attrs:{disabled:e.isEdit,label:"2"}},[a("span",[e._v("补货员")])]),a("Radio",{attrs:{disabled:e.isEdit,label:"3"}},[a("span",[e._v("其他")])])],1)],1),a("FormItem",{attrs:{label:"商户编码",prop:"SubMerId"}},[a("Input",{attrs:{disabled:"true",placeholder:"保存后自动生成"},model:{value:e.form.SubMerId,callback:function(t){e.$set(e.form,"SubMerId",t)},expression:"form.SubMerId"}})],1),a("FormItem",{attrs:{label:"商户名称",prop:"SubMerName"}},[a("Input",{attrs:{disabled:e.isEdit||3!=e.form.MerchantType,placeholder:3!=e.form.MerchantType?"保存后自动生成":"请录入商户名称"},model:{value:e.form.SubMerName,callback:function(t){e.$set(e.form,"SubMerName",t)},expression:"form.SubMerName"}})],1)],1)])],1),a("div",{staticClass:"info"},[a("Card",{style:{marginBottom:"30px"}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("账户信息")]),a("div",{staticClass:"form"},[a("FormItem",{attrs:{label:"商户类型",prop:"PositionName"}},[a("RadioGroup",{attrs:{size:"small",type:"button"},model:{value:e.form.SubMerType,callback:function(t){e.$set(e.form,"SubMerType",t)},expression:"form.SubMerType"}},[a("Radio",{attrs:{label:"2"}},[a("span",[e._v("企业")])]),a("Radio",{attrs:{label:"1"}},[a("span",[e._v("个人")])])],1)],1),2==e.form.SubMerType?a("div",{staticClass:"tab"},[a("FormItem",{attrs:{label:"营业执照"}},[a("iUpload",{ref:"BusinessLicenseImage",attrs:{pic:e.form.BusinessLicenseImage,def:e.BusinessLicenseImage_defaultList}})],1),a("FormItem",{attrs:{label:"法人名称",prop:"ContactName"}},[a("Input",{attrs:{placeholder:"请输入法人或负责人名称"},model:{value:e.form.ContactName,callback:function(t){e.$set(e.form,"ContactName",t)},expression:"form.ContactName"}})],1),a("FormItem",{attrs:{label:"法人证件类型",prop:"CertificateType"}},[a("Select",{attrs:{placeholder:"请选择法人或负责人证件类型"},model:{value:e.form.CertificateType,callback:function(t){e.$set(e.form,"CertificateType",t)},expression:"form.CertificateType"}},e._l(e.cardType,function(t,r){return a("Option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("FormItem",{attrs:{label:"法人证件号码",prop:"CertificateNo"}},[a("Input",{attrs:{placeholder:"请输入法人或负责人证件号码"},model:{value:e.form.CertificateNo,callback:function(t){e.$set(e.form,"CertificateNo",t)},expression:"form.CertificateNo"}})],1),a("FormItem",{attrs:{label:"企业名称",prop:"CompanyName"}},[a("Input",{attrs:{placeholder:"请输入企业名称"},model:{value:e.form.CompanyName,callback:function(t){e.$set(e.form,"CompanyName",t)},expression:"form.CompanyName"}})],1),a("FormItem",{attrs:{label:"企业证件类型",prop:"CompanyCertType"}},[a("Select",{attrs:{placeholder:"请选择企业证件类型"},model:{value:e.form.CompanyCertType,callback:function(t){e.$set(e.form,"CompanyCertType",t)},expression:"form.CompanyCertType"}},e._l(e.compCardType,function(t,r){return a("Option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("FormItem",{attrs:{label:"企业证件号码",prop:"CompanyCertNo"}},[a("Input",{attrs:{placeholder:"请输入企业证件号码"},model:{value:e.form.CompanyCertNo,callback:function(t){e.$set(e.form,"CompanyCertNo",t)},expression:"form.CompanyCertNo"}})],1)],1):e._e(),1==e.form.SubMerType?a("div",{staticClass:"tab"},[a("FormItem",{attrs:{label:"姓名",prop:"ContactName"}},[a("Input",{attrs:{placeholder:"请输入姓名"},model:{value:e.form.ContactName,callback:function(t){e.$set(e.form,"ContactName",t)},expression:"form.ContactName"}})],1),a("FormItem",{attrs:{label:"证件类型",prop:"CertificateType"}},[a("Select",{attrs:{placeholder:"请选择证件类型"},model:{value:e.form.CertificateType,callback:function(t){e.$set(e.form,"CertificateType",t)},expression:"form.CertificateType"}},e._l(e.cardType,function(t,r){return a("Option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("FormItem",{attrs:{label:"证件号码",prop:"CertificateNo"}},[a("Input",{attrs:{placeholder:"请输入证件号码"},model:{value:e.form.CertificateNo,callback:function(t){e.$set(e.form,"CertificateNo",t)},expression:"form.CertificateNo"}})],1),a("FormItem",{attrs:{label:"身份证正面"}},[a("iUpload",{ref:"IdCardFrontImage",attrs:{pic:e.form.IdCardFrontImage,def:e.IdCardFrontImage_defaultList}})],1),a("FormItem",{attrs:{label:"身份证反面"}},[a("iUpload",{ref:"IdCardBackImage",attrs:{pic:e.form.IdCardBackImage,def:e.IdCardBackImage_defaultList}})],1)],1):e._e()],1)])],1),a("div",{staticClass:"info"},[a("Card",{style:{marginBottom:"30px"}},[a("p",{attrs:{slot:"title"},slot:"title"},[e._v("绑定银行卡")]),a("div",{staticClass:"form"},[a("FormItem",{attrs:{label:"收款户名",prop:"AccountName"}},[a("Input",{attrs:{placeholder:"请输入收款户名"},model:{value:e.form.AccountName,callback:function(t){e.$set(e.form,"AccountName",t)},expression:"form.AccountName"}})],1),a("FormItem",{attrs:{label:"收款账号",prop:"Account"}},[a("Input",{attrs:{placeholder:"请输入收款账号"},model:{value:e.form.Account,callback:function(t){e.$set(e.form,"Account",t)},expression:"form.Account"}})],1),a("FormItem",{attrs:{label:"收款银行",prop:"BankName"}},[a("Select",{attrs:{placeholder:"请选择收款银行"},model:{value:e.form.BankName,callback:function(t){e.$set(e.form,"BankName",t)},expression:"form.BankName"}},e._l(e.bank,function(t,r){return a("Option",{key:r,attrs:{value:t}},[e._v(e._s(t))])}),1)],1),a("FormItem",{attrs:{label:"收款账号类型",prop:"AccountType"}},[a("Select",{attrs:{placeholder:"请选择收款账号类型"},model:{value:e.form.AccountType,callback:function(t){e.$set(e.form,"AccountType",t)},expression:"form.AccountType"}},e._l(e.accountType,function(t,r){return a("Option",{key:r,attrs:{value:t.value}},[e._v(e._s(t.label))])}),1)],1),a("FormItem",{attrs:{label:"预留手机号",prop:"MobilePhone"}},[a("Input",{attrs:{placeholder:"请输入预留手机号"},model:{value:e.form.MobilePhone,callback:function(t){e.$set(e.form,"MobilePhone",t)},expression:"form.MobilePhone"}})],1)],1)])],1)])],1),a("div",{staticClass:"handle clear"},[a("Button",{style:{marginRight:"14px"},on:{click:e.back}},[e._v("返回")]),a("Button",{attrs:{type:"info"},on:{click:e.save}},[e._v("保存")])],1)])},[],!1,null,"b9c0190e",null);t.default=o.exports},3175:function(e,t,a){"use strict";var r=a("01ea"),i={props:["pic","def","tip","w","h"],watch:{pic:function(e){this.picture=e}},data:function(){return{picture:"",defaultList:[],visible:!1,uploadList:[],action:"".concat(r.a.uploadUrl,"/upload")}},created:function(){this.picture=this.pic,this.defaultList=this.def},mounted:function(){this.uploadList=this.$refs.upload.fileList},methods:{getPic:function(){return this.picture},uploadFun:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.picture=t,setTimeout(function(){e.$nextTick(function(){e.uploadList=""!=t?[{name:(new Date).getTime()+"",percentage:100,status:"finished",uid:1*(new Date).getTime(),url:t}]:e.$refs.upload.fileList,e.$refs.upload.fileList=[]})},300)},handleView:function(){this.visible=!0},handleRemove:function(){this.$refs.upload.fileList=this.uploadList=[],this.picture=""},handleSuccess:function(e,t){t.url=this.picture=e.fullFilePath,t.name=(new Date).getTime()},handleFormatError:function(){this.$Notice.warning({title:"系统提示",desc:"文件格式不正确"})},handleMaxSize:function(){this.$Notice.warning({title:"系统提示",desc:"文件不能超过2M大小"})},handleBeforeUpload:function(e){var t=this;return new Promise(function(a,r){if(t.uploadList.length<2||(t.$Notice.warning({title:"图片超过上传限制"}),r()),t.w&&t.h){var i=new FileReader;i.onload=function(e){var i=e.target.result,o=new Image;o.onload=function(){var e=o.width,i=o.height;e==t.w|i==t.h?a():(t.$Notice.warning({title:"系统提示",desc:"文件尺寸不符合"}),r())},o.src=i},i.readAsDataURL(e)}else a()})}}},o=(a("0390"),a("2877")),s=Object(o.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.picture,callback:function(t){e.picture=t},expression:"picture"}}),e._l(e.uploadList,function(t,r){return a("div",{key:r,staticClass:"demo-upload-list"},["finished"===t.status?[a("img",{attrs:{src:t.url}}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return e.handleView(t.name)}}}),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return e.handleRemove(t)}}})],1)]:[t.showProgress?a("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),a("Upload",{directives:[{name:"show",rawName:"v-show",value:!e.picture,expression:"!picture"}],ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":e.defaultList,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":2028,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:"",type:"drag",action:e.action}},[a("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),a("Modal",{attrs:{title:"图片预览"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?a("img",{staticStyle:{width:"100%"},attrs:{src:e.picture}}):e._e()]),a("p",{staticClass:"pic-tip"},[e._v(e._s(e.tip?e.tip:"仅支持png，大小小于2M"))])],2)},[],!1,null,"2cdaa432",null);t.a=s.exports},3778:function(e,t,a){},6679:function(e,t,a){},bb17:function(e,t,a){"use strict";var r=a("6679");a.n(r).a},ee7c:function(e,t,a){"use strict";var r=a("fd80");a.n(r).a},fd80:function(e,t,a){}}]);