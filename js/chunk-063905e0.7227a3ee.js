(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-063905e0"],{"3d21":function(e,t,a){},ca58:function(e,t,a){"use strict";a.r(t);var i={data:function(){return{loading:!1,loadingOos:!1,modal:!1,page:null,Person:[],query:{PersonId:"",pageSize:null,pageIndex:null},data:[],columns:[{type:"selection",width:60,align:"center"},{title:"设备编号",key:"MachineCode"},{title:"设备名称",key:"MachineName"},{title:"点位",key:"PositionName"},{title:"补货员",key:"PersonName"},{title:"缺货数量",key:"ShortageCount",width:90},{title:"上次补货时间",key:"LastReplenishTime"},{title:"操作",slot:"action",width:100}],oos:[],oos_sele:[],oos_columns:[{title:"机柜",key:"CabinetCode"},{title:"货道行/列",key:"Position",width:100},{title:"商品名称",key:"GoodsName"},{title:"货道容量",key:"Capacity",width:100},{title:"当前数量",key:"CurQty",width:100},{title:"缺货数量",key:"ShortageQty",width:100}]}},created:function(){this.getBasic(),this.getLackGoodsDevice()},methods:{onSelectChangeOOS:function(e){this.oos_sele=e},getBasic:function(){var e=this;this.$api("GET","/LackGoodsDevice/GetLackGoodsDeviceListBasicData").then(function(t){0===t.ErrorCode?e.Person=t.Data.PersonList:e.$Notice.warning({title:"系统提示",desc:t.Message})})},updateColumns:function(e){this.columns=e},getLackGoodsDevice:function(){var e=this;this.loading=!0,this.page?(this.query.pageSize=this.page.pageSize,this.query.pageIndex=this.page.pageIndex):(this.query.pageSize=10,this.query.pageIndex=1),this.$api("POST","/LackGoodsDevice/GetLackGoodsDeviceList",this.query).then(function(t){e.loading=!1,0===t.ErrorCode?(e.data=t.Data.LackGoodsDeviceList,e.page={pageCount:t.Data.Total,pageIndex:e.query.pageIndex,pageSize:e.query.pageSize}):e.$Notice.warning({title:"系统提示",desc:t.Message})})},onChange:function(e){this.page.pageIndex=1*e,this.getLackGoodsDevice()},onPageSizeChange:function(e){this.page.pageSize=1*e,this.getLackGoodsDevice()},details:function(e){var t=this;this.loadingOos=!0,this.oos=[],this.modal=!0,this.$api("GET","/LackGoodsDevice/GetLackGoodsDeviceInfo?machineId=".concat(this.data[e].MachineId)).then(function(e){t.loadingOos=!1,0===e.ErrorCode?t.oos=e.Data:t.$Notice.warning({title:"系统提示",desc:e.Message})})},seleChange:function(){this.page=null,this.getLackGoodsDevice()},handle:function(){if(this.oos_sele.length){var e=[];this.oos_sele.map(function(t){e.push(t.MachineId)}),this.$router.push("/warehouse/pickList/handle?list=".concat(e.join("_")))}else this.$router.push("/warehouse/pickList/handle")}}},o=(a("f905"),a("2877")),n=Object(o.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"btn-bar clear"},[a("div",{staticClass:"fl"},[a("Button",{style:{marginRight:"6px"},attrs:{icon:"md-refresh"}},[e._v("刷新")]),a("Button",{style:{marginRight:"42px"},attrs:{type:"info",icon:"md-add"},on:{click:e.handle}},[e._v("生成提货单")]),a("span",{staticClass:"label",style:{marginRight:"6px"}},[e._v("补货员")]),a("Select",{staticStyle:{width:"200px","margin-right":"16px"},on:{"on-change":e.seleChange},model:{value:e.query.PersonId,callback:function(t){e.$set(e.query,"PersonId",t)},expression:"query.PersonId"}},e._l(e.Person,function(t){return a("Option",{key:t.Value,attrs:{value:t.Value}},[e._v(e._s(t.Name))])}),1)],1),a("FiltrateButton",{staticClass:"fr",attrs:{columns:e.columns},on:{updateColumns:e.updateColumns}})],1),a("div",{staticClass:"table-section"},[a("Table",{attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data},on:{"on-selection-change":e.onSelectChangeOOS},scopedSlots:e._u([{key:"action",fn:function(t){t.row;var i=t.index;return[a("Button",{attrs:{type:"info",size:"small"},on:{click:function(t){return e.details(i)}}},[e._v("缺货详情")])]}}])})],1),e.page?a("iPage",{attrs:{pageSize:e.page.pageSize,current:e.page.pageIndex,total:e.page.pageCount},on:{onChange:e.onChange,onPageSizeChange:e.onPageSizeChange}}):e._e(),a("Modal",{attrs:{title:"缺货详情",width:"900"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("Table",{attrs:{loading:e.loadingOos,border:"",columns:e.oos_columns,data:e.oos}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info"},on:{click:function(t){e.modal=!1}}},[e._v("关闭")])],1)],1)],1)},[],!1,null,"068dcf30",null);t.default=n.exports},f905:function(e,t,a){"use strict";var i=a("3d21");a.n(i).a}}]);