(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-9f9c5734"],{"0390":function(e,t,i){"use strict";var o=i("3778");i.n(o).a},3175:function(e,t,i){"use strict";var o=i("01ea"),a={props:["pic","def","tip","w","h"],watch:{pic:function(e){this.picture=e}},data:function(){return{picture:"",defaultList:[],visible:!1,uploadList:[],action:"".concat(o.a.uploadUrl,"/upload")}},created:function(){this.picture=this.pic,this.defaultList=this.def},mounted:function(){this.uploadList=this.$refs.upload.fileList},methods:{getPic:function(){return this.picture},uploadFun:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.picture=t,setTimeout(function(){e.$nextTick(function(){e.uploadList=""!=t?[{name:(new Date).getTime()+"",percentage:100,status:"finished",uid:1*(new Date).getTime(),url:t}]:e.$refs.upload.fileList,e.$refs.upload.fileList=[]})},300)},handleView:function(){this.visible=!0},handleRemove:function(){this.$refs.upload.fileList=this.uploadList=[],this.picture=""},handleSuccess:function(e,t){t.url=this.picture=e.fullFilePath,t.name=(new Date).getTime()},handleFormatError:function(){this.$Notice.warning({title:"系统提示",desc:"文件格式不正确"})},handleMaxSize:function(){this.$Notice.warning({title:"系统提示",desc:"文件不能超过2M大小"})},handleBeforeUpload:function(e){var t=this;return new Promise(function(i,o){if(t.uploadList.length<2||(t.$Notice.warning({title:"图片超过上传限制"}),o()),t.w&&t.h){var a=new FileReader;a.onload=function(e){var a=e.target.result,l=new Image;l.onload=function(){var e=l.width,a=l.height;e==t.w|a==t.h?i():(t.$Notice.warning({title:"系统提示",desc:"文件尺寸不符合"}),o())},l.src=a},a.readAsDataURL(e)}else i()})}}},l=(i("0390"),i("2877")),r=Object(l.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],model:{value:e.picture,callback:function(t){e.picture=t},expression:"picture"}}),e._l(e.uploadList,function(t,o){return i("div",{key:o,staticClass:"demo-upload-list"},["finished"===t.status?[i("img",{attrs:{src:t.url}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(i){return e.handleView(t.name)}}}),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return e.handleRemove(t)}}})],1)]:[t.showProgress?i("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),i("Upload",{directives:[{name:"show",rawName:"v-show",value:!e.picture,expression:"!picture"}],ref:"upload",staticStyle:{display:"inline-block",width:"58px"},attrs:{"show-upload-list":!1,"default-file-list":e.defaultList,"on-success":e.handleSuccess,format:["jpg","jpeg","png"],"max-size":2028,"on-format-error":e.handleFormatError,"on-exceeded-size":e.handleMaxSize,"before-upload":e.handleBeforeUpload,multiple:"",type:"drag",action:e.action}},[i("div",{staticStyle:{width:"58px",height:"58px","line-height":"58px"}},[i("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),i("Modal",{attrs:{title:"图片预览"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?i("img",{staticStyle:{width:"100%"},attrs:{src:e.picture}}):e._e()]),i("p",{staticClass:"pic-tip"},[e._v(e._s(e.tip?e.tip:"仅支持png，大小小于2M"))])],2)},[],!1,null,"2cdaa432",null);t.a=r.exports},3778:function(e,t,i){},4521:function(e,t,i){},e783:function(e,t,i){"use strict";var o=i("4521");i.n(o).a},edf2:function(e,t,i){"use strict";i.r(t);var o={components:{iUpload:i("3175").a},data:function(){return{ModelPicture:!1,loading:!1,defaultList:[],visible:!1,uploadList:[],modal:!1,deleModal:!1,page:null,modalId:null,picture:null,modelType:[],boardType:[],form:{ModelName:"",ModelDesc:"",ModelType:"",BoardType:"",ScreenSize:"",ModelPicture:""},ruleValidate:{ModelName:[{required:!0,message:"请输入机型名称",trigger:"blur"}],ModelDesc:[{required:!0,message:"请输入机型描述",trigger:"blur"}],ModelType:[{required:!0,message:"请输入设备类型",trigger:"change"}],BoardType:[{required:!0,message:"请输入主板类型",trigger:"change"}],ScreenSize:[{required:!0,message:"请输入屏幕尺寸",trigger:"blur"}],ModelPicture:[{required:!0,message:"请输入机型图片",trigger:"blur"}]},query:{Search:"",pageSize:null,pageIndex:null},columns:[{title:"机型名称",key:"ModelName"},{title:"机型描述",key:"ModelDesc"},{title:"设备类型",key:"ModelTypeName"},{title:"主板类型",key:"BoardTypeName"},{title:"屏幕尺寸",key:"ScreenSize",width:100},{title:"机型图片",slot:"ModelPicture",width:100},{title:"创建人",key:"AddUserName",width:120},{title:"添加时间",key:"AddDate",width:160},{title:"操作",slot:"action",width:140}],data:[]}},created:function(){this.getModelType(),this.getBoardType(),this.getEqModel()},methods:{openModelPicture:function(e){this.picture=e,this.ModelPicture=!0},updateColumns:function(e){this.columns=e},getBoardType:function(){var e=this;this.$api("GET","/EqModel/GetBoardTypeList").then(function(t){e.boardType=t.Data})},getModelType:function(){var e=this;this.$api("GET","/EqModel/GetModelTypeList").then(function(t){e.modelType=t.Data})},getEqModel:function(){var e=this;this.loading=!0,this.page?(this.query.pageSize=this.page.pageSize,this.query.pageIndex=this.page.pageIndex):(this.query.pageSize=30,this.query.pageIndex=1),this.$api("POST","/EqModel/GetEqModelList",this.query).then(function(t){e.loading=!1,0===t.ErrorCode?(e.data=t.Data.EqModelList,e.page={pageCount:t.Data.Total,pageIndex:e.query.pageIndex,pageSize:e.query.pageSize}):e.$Notice.warning({title:"系统提示",desc:t.Message})})},onChange:function(e){this.page.pageIndex=1*e,this.getEqModel()},onPageSizeChange:function(e){this.page.pageSize=1*e,this.getEqModel()},deleHandle:function(e){this.modalId=this.data[e].Id,this.deleModal=!0},deleteM:function(){var e=this;this.$api("GET","/EqModel/DelectEqModelInfo?eqModelId=".concat(this.modalId)).then(function(t){0==t.ErrorCode?(e.$Notice.success({title:"系统提示",desc:"删除成功"}),e.deleModal=!1,e.page=null,e.getEqModel()):e.$Notice.warning({title:"系统提示",desc:t.Message})})},addModel:function(){this.defaultList=[],this.modalId=null,this.form={ModelName:"",ModelDesc:"",ModelType:"",BoardType:"",ScreenSize:"",ModelPicture:""},this.$refs.iupload.uploadFun(),this.modal=!0},edit:function(e){var t=this;this.modalId=this.data[e].Id,this.$api("GET","/EqModel/GetEqModelInfo?eqModelId=".concat(this.modalId)).then(function(e){0==e.ErrorCode?(t.form.ModelName=e.Data.ModelName,t.form.ModelDesc=e.Data.ModelDesc,t.form.ModelType=e.Data.ModelType+"",t.form.BoardType=e.Data.BoardType,t.form.ScreenSize=e.Data.ScreenSize,t.$set(t.defaultList,0,{name:(new Date).getTime()+"",url:e.Data.ModelPicture}),t.form.ModelPicture=e.Data.ModelPicture,t.$refs.iupload.uploadFun(e.Data.ModelPicture),t.modal=!0):t.$Notice.warning({title:"系统提示",desc:e.Message})})},addEqModel:function(){var e=this;this.form.ModelPicture=this.$refs.iupload.picture,this.$refs.ruleValidate.validate(function(t){if(t){e.form.ModelType=1*e.form.ModelType;var i="/EqModel/AddEqModelInfo";e.modalId&&(i="/EqModel/UpdateEqModelInfo",e.form.EqModelId=e.modalId),e.$api("POST",i,e.form).then(function(t){0==t.ErrorCode?(e.modal=!1,e.$Notice.success({title:"系统提示",desc:"保存成功"}),e.page=null,e.getEqModel()):e.$Notice.warning({title:"系统提示",desc:t.Message})})}else e.$Notice.warning({title:"系统提示",desc:"请填写相关的信息"})})},handleSelectAll:function(e){this.$refs.selection.selectAll(e)}}},a=(i("e783"),i("2877")),l=Object(a.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"btn-bar clear"},[i("div",{staticClass:"fl"},[i("Button",{style:{marginRight:"6px"},attrs:{type:"info",icon:"md-add"},on:{click:e.addModel}},[e._v("添加机型")]),i("Button",{attrs:{icon:"md-refresh"},on:{click:e.getEqModel}},[e._v("刷新")])],1),i("FiltrateButton",{staticClass:"fr",attrs:{columns:e.columns},on:{updateColumns:e.updateColumns}})],1),i("div",{staticClass:"table-section"},[i("Table",{ref:"selection",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data},scopedSlots:e._u([{key:"ModelPicture",fn:function(t){var o=t.row;return t.index,[i("div",{staticClass:"ModelPicture"},[i("img",{attrs:{src:o.ModelPicture},on:{click:function(t){return e.openModelPicture(o.ModelPicture)}}})])]}},{key:"action",fn:function(t){t.row;var o=t.index;return[i("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"info",size:"small"},on:{click:function(t){return e.edit(o)}}},[e._v("编辑")]),i("Button",{attrs:{type:"error",size:"small"},on:{click:function(t){return e.deleHandle(o)}}},[e._v("删除")])]}}])})],1),e.page?i("iPage",{attrs:{pageSize:e.page.pageSize,current:e.page.pageIndex,total:e.page.pageCount},on:{onChange:e.onChange,onPageSizeChange:e.onPageSizeChange}}):e._e(),i("Modal",{attrs:{width:"360"},model:{value:e.deleModal,callback:function(t){e.deleModal=t},expression:"deleModal"}},[i("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[i("Icon",{attrs:{type:"ios-information-circle"}}),i("span",[e._v("删除确认")])],1),i("div",{staticStyle:{"text-align":"center"}},[i("p",[e._v("确定要删除此机型吗？删除后将无法恢复")])]),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"error",size:"large",long:""},on:{click:e.deleteM}},[e._v("删除")])],1)]),i("Modal",{attrs:{width:"500","footer-hide":!0,title:e.modalId?"编辑机型":"添加机型"},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[i("Form",{ref:"ruleValidate",attrs:{model:e.form,rules:e.ruleValidate,"label-width":80}},[i("FormItem",{attrs:{label:"机型名称",prop:"ModelName"}},[i("Input",{attrs:{placeholder:"请输入机型名称"},model:{value:e.form.ModelName,callback:function(t){e.$set(e.form,"ModelName",t)},expression:"form.ModelName"}})],1),i("FormItem",{attrs:{label:"设备类型",prop:"ModelType"}},[i("Select",{attrs:{placeholder:"请选择设备类型"},model:{value:e.form.ModelType,callback:function(t){e.$set(e.form,"ModelType",t)},expression:"form.ModelType"}},e._l(e.modelType,function(t,o){return i("Option",{key:o,attrs:{value:t.Id+""}},[e._v(e._s(t.Name))])}),1)],1),i("FormItem",{attrs:{label:"主板类型",prop:"BoardType"}},[i("Select",{attrs:{placeholder:"请选择主板类型"},model:{value:e.form.BoardType,callback:function(t){e.$set(e.form,"BoardType",t)},expression:"form.BoardType"}},e._l(e.boardType,function(t,o){return i("Option",{key:o,attrs:{value:t.Id+""}},[e._v(e._s(t.Name))])}),1)],1),i("FormItem",{attrs:{label:"屏幕尺寸",prop:"ScreenSize"}},[i("Input",{attrs:{placeholder:"请输入屏幕尺寸"},model:{value:e.form.ScreenSize,callback:function(t){e.$set(e.form,"ScreenSize",t)},expression:"form.ScreenSize"}})],1),i("FormItem",{attrs:{label:"机型描述",prop:"ModelDesc"}},[i("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入机型描述"},model:{value:e.form.ModelDesc,callback:function(t){e.$set(e.form,"ModelDesc",t)},expression:"form.ModelDesc"}})],1),i("FormItem",{attrs:{label:"机型图片",prop:"ModelPicture"}},[i("iUpload",{ref:"iupload",attrs:{pic:e.form.ModelPicture,def:e.defaultList}})],1),i("FormItem",[i("Button",{attrs:{type:"primary"},on:{click:e.addEqModel}},[e._v("保存")]),i("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){e.modal=!1}}},[e._v("取消")])],1)],1)],1),i("Modal",{staticClass:"ModelPicture_show",attrs:{width:"660"},model:{value:e.ModelPicture,callback:function(t){e.ModelPicture=t},expression:"ModelPicture"}},[i("img",{attrs:{src:e.picture}}),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"info"},on:{click:function(t){e.ModelPicture=!1}}},[e._v("关闭")])],1)])],1)},[],!1,null,"0940efd0",null);t.default=l.exports}}]);