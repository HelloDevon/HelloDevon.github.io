(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-cbf48ef4"],{"9ca9":function(e,t,a){"use strict";var i=a("dd8f");a.n(i).a},c255:function(e,t,a){"use strict";a.r(t);var i={data:function(){return{loading:!1,page:null,time:[],query:{BeginDate:"",EndDate:"",RepairPersonId:"",pageSize:null,pageIndex:null},RepairPerson:[],data:[],columns:[{title:"维修时间",key:"RepairTime"},{title:"维修员",key:"RepairPerson",width:100},{title:"设备编号",key:"MachineCode"},{title:"设备名称",key:"MachineName"},{title:"点位",key:"PositionName"},{title:"故障上报时间",key:"FaultTime"},{title:"故障类型",key:"FaultTypeName",width:160},{title:"故障描述",key:"FaultDesc"},{title:"维修结果",key:"HandleResult"}]}},created:function(){this.getRepairWorkOrderList(),this.getBasic()},methods:{getBasic:function(){var e=this;this.$api("GET","/FaultWorkOrder/GetFaultWorkOrderBasicData").then(function(t){0===t.ErrorCode?e.RepairPerson=t.Data.RepairPersonList:e.$Notice.warning({title:"系统提示",desc:t.Message})})},updateColumns:function(e){this.columns=e},timeChange:function(e){""==e.join("")?this.time=[]:this.time=e,this.page=null,this.getRepairWorkOrderList()},seleChange:function(){this.page=null,this.getRepairWorkOrderList()},getRepairWorkOrderList:function(){var e=this;this.loading=!0,this.page?(this.query.pageSize=this.page.pageSize,this.query.pageIndex=this.page.pageIndex):(this.query.pageSize=10,this.query.pageIndex=1),this.time.length&&(this.query.BeginDate=this.time[0],this.query.EndDate=this.time[1]),this.$api("POST","/RepairWorkOrder/GetRepairWorkOrderList",this.query).then(function(t){e.loading=!1,0===t.ErrorCode?(e.data=t.Data,e.page={pageCount:t.TotalRecords,pageIndex:e.query.pageIndex,pageSize:e.query.pageSize}):e.$Notice.warning({title:"系统提示",desc:t.Message})})},onChange:function(e){this.page.pageIndex=1*e,this.getRepairWorkOrderList()},onPageSizeChange:function(e){this.page.pageSize=1*e,this.getRepairWorkOrderList()}}},n=(a("9ca9"),a("2877")),r=Object(n.a)(i,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"btn-bar clear"},[a("div",{staticClass:"fl"},[a("span",{staticClass:"label",style:{marginRight:"6px"}},[e._v("按时间段")]),a("DatePicker",{staticStyle:{width:"220px"},style:{marginRight:"16px"},attrs:{value:e.time,format:"yyyy-MM-dd",type:"daterange",placement:"bottom-end",placeholder:"请选择搜索的时间段"},on:{"on-change":e.timeChange}}),a("span",{staticClass:"label",style:{marginRight:"6px"}},[e._v("维修员")]),a("Select",{staticStyle:{width:"200px","margin-right":"16px"},on:{"on-change":e.seleChange},model:{value:e.query.RepairPersonId,callback:function(t){e.$set(e.query,"RepairPersonId",t)},expression:"query.RepairPersonId"}},e._l(e.RepairPerson,function(t){return a("Option",{key:t.Value,attrs:{value:t.Value}},[e._v(e._s(t.Name))])}),1),a("Button",{style:{marginRight:"42px"},attrs:{icon:"md-refresh"},on:{click:e.getRepairWorkOrderList}},[e._v("刷新")])],1),a("FiltrateButton",{staticClass:"fr",attrs:{columns:e.columns},on:{updateColumns:e.updateColumns}})],1),a("div",{staticClass:"table-section"},[a("Table",{attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data}})],1),e.page?a("iPage",{attrs:{pageSize:e.page.pageSize,current:e.page.pageIndex,total:e.page.pageCount},on:{onChange:e.onChange,onPageSizeChange:e.onPageSizeChange}}):e._e()],1)},[],!1,null,"a977bb92",null);t.default=r.exports},dd8f:function(e,t,a){}}]);