(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-38027404"],{6191:function(e,t,i){"use strict";i.r(t);var r={data:function(){return{groupDimension:[],operatorMachine:[],listStyle:{width:"278px",height:"350px"},ruleValidate:{GroupName:[{required:!0,message:"请输入分组名称",trigger:"blur"}],GroupDimension:[{required:!0,message:"请选择分组维度",trigger:"blur"}]},form:{GroupName:"",GroupDimension:"",MachineIdList:[]}}},created:function(){this.$route.params.id&&(this.form.Id=this.$route.params.id,this.editInit()),this.getGroupDimension(),this.getOperatorMachine()},methods:{editInit:function(){var e=this;this.$api("GET","/MachineGroup/GetMachineGroupById?id=".concat(this.form.Id)).then(function(t){0===t.ErrorCode&&(e.form.GroupName=t.Data.GroupName,e.form.GroupDimension=t.Data.GroupDimension,e.form.MachineIdList=t.Data.DetailsList.map(function(e){return e.MachineID}))})},getOperatorMachine:function(){var e=this;this.$api("GET","/MachineGroup/GetOperatorMachineList").then(function(t){0===t.ErrorCode&&(e.operatorMachine=t.Data.map(function(e){return{key:e.MachineID,label:e.MachineName,description:e.MachineName,disabled:!1}}))})},getGroupDimension:function(){var e=this;this.$api("GET","/MachineGroup/GetGroupDimensionList").then(function(t){0===t.ErrorCode&&(e.groupDimension=t.Data)})},render:function(e){return e.label},handleChange:function(e){this.form.MachineIdList=e},reloadMockData:function(){},save:function(){var e=this;this.$refs.ruleValidate.validate(function(t){if(t)if(e.form.MachineIdList.length){var i="/MachineGroup/AddMachineGroup";e.form.Id&&(i="MachineGroup/UpdateMachineGroup"),e.$api("POST",i,e.form).then(function(t){0==t.ErrorCode?(e.$Notice.success({title:"系统提示",desc:"保存成功"}),e.form.Id||(e.form={GroupName:"",GroupDimension:"",MachineIdList:[]})):e.$Notice.warning({title:"系统提示",desc:t.Message})})}else e.$Notice.warning({title:"系统提示",desc:"请选择设备"});else e.$Notice.warning({title:"系统提示",desc:"强填写完整"})})},back:function(){this.$router.go(-1)}}},n=(i("c0bf"),i("2877")),o=Object(n.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"contain"},[i("Form",{ref:"ruleValidate",style:{marginBottom:"50px"},attrs:{model:e.form,"label-position":"left",rules:e.ruleValidate,"label-width":100}},[i("FormItem",{attrs:{label:"分组维度",prop:"GroupDimension"}},[i("Select",{attrs:{placeholder:"请选择分组维度"},model:{value:e.form.GroupDimension,callback:function(t){e.$set(e.form,"GroupDimension",t)},expression:"form.GroupDimension"}},e._l(e.groupDimension,function(t,r){return i("Option",{key:r,attrs:{value:t}},[e._v(e._s(t))])}),1)],1),i("FormItem",{attrs:{label:"分组名称",prop:"GroupName"}},[i("Input",{attrs:{placeholder:"请输入分组名称"},model:{value:e.form.GroupName,callback:function(t){e.$set(e.form,"GroupName",t)},expression:"form.GroupName"}})],1)],1),i("Transfer",{attrs:{titles:["所有设备","绑定设备"],data:e.operatorMachine,"target-keys":e.form.MachineIdList,"list-style":e.listStyle,"render-format":e.render,filterable:""},on:{"on-change":e.handleChange}},[i("div",{style:{float:"right",margin:"5px"}},[i("Button",{attrs:{size:"small"},on:{click:e.reloadMockData}},[e._v("刷新")])],1)]),i("div",{style:{paddingTop:"20px"}},[i("Button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")]),i("Button",{staticStyle:{"margin-left":"8px"},on:{click:e.back}},[e._v("返回")])],1)],1)])},[],!1,null,"4bcc576a",null);t.default=o.exports},9893:function(e,t,i){},c0bf:function(e,t,i){"use strict";var r=i("9893");i.n(r).a}}]);